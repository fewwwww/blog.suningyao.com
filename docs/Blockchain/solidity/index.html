<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Blockchain/solidity">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">🧟‍♂️ 通过CryptoZombies快速上手Solidity | Suning Yao / msfew | Blogs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://fewwwww.github.io/docs/Blockchain/solidity/"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="🧟‍♂️ 通过CryptoZombies快速上手Solidity | Suning Yao / msfew | Blogs"><meta data-rh="true" name="description" content="找到一个很好的学习Solidity的网站, 可以通过互动式的教程, 通过写智能合约来学习Solidity, 不用担心环境搭建, IDE配置等上来劝退的问题."><meta data-rh="true" property="og:description" content="找到一个很好的学习Solidity的网站, 可以通过互动式的教程, 通过写智能合约来学习Solidity, 不用担心环境搭建, IDE配置等上来劝退的问题."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://fewwwww.github.io/docs/Blockchain/solidity/"><link data-rh="true" rel="alternate" href="https://fewwwww.github.io/docs/Blockchain/solidity/" hreflang="zh"><link data-rh="true" rel="alternate" href="https://fewwwww.github.io/docs/Blockchain/solidity/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ef16c1ee.css">
<link rel="preload" href="/assets/js/runtime~main.fb2df4a2.js" as="script">
<link rel="preload" href="/assets/js/main.d6940a7e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">blog.suningyao</b></a><a class="navbar__item navbar__link" href="/docs/intro/">About</a><a class="navbar__item navbar__link" href="/docs/Blockchain/thoughts/">Blockchain</a><a class="navbar__item navbar__link" href="/docs/Code/incubate/">Code</a><a class="navbar__item navbar__link" href="/docs/Sports/racquets/">Sports</a><a class="navbar__item navbar__link" href="/docs/Music/music-n-me/">Music</a><a class="navbar__item navbar__link" href="/docs/Life/valley/">Life</a></div><div class="navbar__items navbar__items--right"><a href="https://sny.is/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Links<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://suningyao.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Portfolio<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/fewwwww/blog.suningyao.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"><b>blog.suningyao</b></a><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro/">intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Blockchain/thoughts/">🔒⛓️ Blockchain</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/thoughts/">💡 关于区块链的一些个人思考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/zero-knowledge/">🎭 从零知识到零知识证明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/hack-award/">🏃 组队参与黑客松的获奖情况</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/os/">❤️ WeLightOS开发的心路历程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/research-dao/">🤝 一天内组建一个研究 DAO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/erc-721/">🎨 ERC标准以及NFT应用开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/fisco-ubuntu/">📠 Ubuntu搭建Fisco区块链</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Blockchain/solidity/">🧟‍♂️ 通过互动教程学习Solidity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/fisco-arm-mac/">💪 Arm Mac搭建Fisco区块链</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/hack-call/">🔬 调用无前端无合约的智能合约</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/cairo-0/">🇪🇬 学习Cairo智能合约开发 (零)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/reborn/">🐣 观点: Crypto 崩溃融合新生</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/composability/">🧩 观点: Crypto 破碎的可组合性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/op-zk/">🚂 观点: OP与ZK机制的差异</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/overachieve/">🔍 观点: 强化以太坊</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/rollup-diss/">🔍 观点: 批评一下 L2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/zk-criticism/">😤 观点: 批评一下 ZK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/ai-rollup/">🤯 观点: AI Rollup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/app-chain/">🏠 读懂App-chain: 优势与缺点</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/arbitrum/">⛰️ 读懂Arbitrum: L2 第一生态</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/architecture/">🔑 读懂DApp: Web3原生架构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/arweave/">🐘 读懂Arweave: Web3 Layer 0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/automation/">🦿 读懂Automation与Bot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/chronicle/">📖 读懂Crypto: 思潮编年史</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/dfinity/">☁️ 读懂Dfinity: 云计算+区块链</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/feed/">🥄 读懂Feed: 回到过去的 Web3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/hermez/">📐 读懂Polygon: Hermez zkEVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/hyper-oracle-notes/">📒 读懂读懂Hyper Oracle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/hyper-oracle-posts/">👻 为Hyper Oracle所写的研究</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/hyper-oracle/">🌈 读懂Hyper Oracle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/indexing-keeper/">🗿 读懂indexing与keeper协议</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/mev/">🤖️ 读懂MEV: 描绘, 分类, 支配</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/modular/">🍱 读懂模块化: 彻底 Rollup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/next-gen-op/">👨‍⚖️ 读懂OP: OP第二代架构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/nft-redefined/">🌫 读懂NFT: 不止是艺术品</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/oracle-pos/">🤔️ 读懂预言机的不安全PoS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/pow/">⚒️ 读懂 PoW: 无处不在</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/privacy/">🎭 读懂隐私: Web3 的另一面</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/rollup/">📜 读懂Rollup: 爱恨好与坏</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/scp/">🎲 读懂SCP: 基于存储设计范式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/starkware/">🇮🇱 读懂StarkWare: 以太坊zk L2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/twap/">🧙‍♂️ 读懂TWAP: 下一代预言机</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/uniswap-interface-fee/">🤝 对于 Uniswap 前端费用的讨论</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/utxoracle/">💬 对于 UTXOracle 的讨论</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/world-supercomputer/">👾 读懂World Supercomputer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/zkpos/">🛰️ 读懂zkPoS: 端到端Trustless</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/zkvm/">🧮 读懂zk: zk, zkEVM, zkVM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/zkwasm/">💥 读懂zkWASM: zkVM的未来</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Code/incubate/">💄📱 Code</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Sports/racquets/">🎾🦾 Sports</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Music/music-n-me/">🎙🎧 Music</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Life/valley/">☀️👀 Life</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">🔒⛓️ Blockchain</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">🧟‍♂️ 通过互动教程学习Solidity</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>🧟‍♂️ 通过CryptoZombies快速上手Solidity</h1><p>找到一个很好的<a href="https://cryptozombies.io/" target="_blank" rel="noopener noreferrer">学习Solidity的网站</a>, 可以通过互动式的教程, 通过写智能合约来学习Solidity, 不用担心环境搭建, IDE配置等上来劝退的问题.</p><p>Solidity本身和Java类似, 语言语法不难, 只是生态以及开发工具不同. 开发工具有ganache(搭建测试网络), truffle(cli中部署调试合约), Jest(测试框架)等, 生态中的库有OpenZepplin等. 具体开发流程可参考<a href="https://blog.suningyao.com/docs/Blockchain/erc-721" target="_blank" rel="noopener noreferrer">本文</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="第一课-搭建僵尸工厂">第一课: 搭建僵尸工厂<a href="#第一课-搭建僵尸工厂" class="hash-link" aria-label="第一课: 搭建僵尸工厂的直接链接" title="第一课: 搭建僵尸工厂的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-项目概述">1. 项目概述<a href="#1-项目概述" class="hash-link" aria-label="1. 项目概述的直接链接" title="1. 项目概述的直接链接">​</a></h3><hr><p>我们将创造一个&quot;僵尸工厂&quot;, 用它建立一支僵尸部队.</p><ul><li>我们的工厂会把我们部队中所有的僵尸保存到数据库中.</li><li>工厂会有一个函数能产生新的僵尸.</li><li>每个僵尸会有一个随机的独一无二的面孔.</li></ul><p>僵尸的外表取决于一个16位的整数, 如: 8356281049284737.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-基本数据结构">2. 基本数据结构<a href="#2-基本数据结构" class="hash-link" aria-label="2. 基本数据结构的直接链接" title="2. 基本数据结构的直接链接">​</a></h3><hr><ul><li><p>版本: 一个Solidity文件需要在开头声明编译器版本, 避免编译器更新造成文件破坏.</p></li><li><p>合约: Solidity代码都包裹在合约里面. 一份合约就是应用的基本模块, 所有的变量和函数都属于一份合约, 它是你所有应用的起点.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 声明&quot;代码的版本&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 制造僵尸的合约工厂</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>状态变量: 状态变量直接写在合约内部一层, 被永久地保存在合约中, 存储在区块链里.</p></li><li><p>无符号整数: uint全称为unsigned integer, 没有符号的整数, 也就是0以及所有正数. (uint默认为一个可以很大的数, 如果出于某种特殊考虑需要使用数值更小的数, 可以使用uint8等)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // DNA的位数是16位.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>数学运算: 加,减,乘,除,取余数,乘方 === +,-,*,/,%,**.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 保证DNA是16位数.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>结构体: 相对于基本类型, 生成一个更复杂的有更多属性的数据类型.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 一个Zombie类型有名字和DNA.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>数组: 建立一个有顺序的集合, 可以是静态或者动态. 公共数组会自动创建getter方法(不用public就得手动写一个function来打印变量, 用了就可以直接获取变量).</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // zombies数组是动态的, 可以变换长度; 是公共的, 自动创建getter方法; 里面的每个元素都是Zombie类型.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie[] public zombies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-函数的基本操作">3. 函数的基本操作<a href="#3-函数的基本操作" class="hash-link" aria-label="3. 函数的基本操作的直接链接" title="3. 函数的基本操作的直接链接">​</a></h3><hr><ul><li><p>函数: 不变的输入就对应不变的输出. 参数按习惯以<code>_</code>开头.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie[] public zombies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 用于创建僵尸的方程, 输入参数为名字和DNA.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function createZombie(string _name, uint _dna) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>创建新的实例, 操作数组</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie[] public zombies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function createZombie(string _name, uint _dna) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 在zombies状态变量里添加一个新的Zombie(参数来自于方程参数)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        zombies.push(Zombie(_name, _dna));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>私有/公共函数: Solidity中函数默认为公共, 任何一方都可以调用, 容易会有安全隐患. 私有函数是只有我们合约中的其它函数才能够调用, 名字一般以<code>_</code>开始.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie[] public zombies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // private要放在变量名后面.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _createZombie(string _name, uint _dna) private {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        zombies.push(Zombie(_name, _dna));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>函数更多属性: 可以通过<code>returns (uint)</code>定义返回值; 通过修饰符<code>view</code>表示函数只读取数据; 通过修饰符<code>pure</code>表示是个不读取数据的纯函数. 不需要刻意记忆, IDE会提示.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie[] public zombies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _createZombie(string _name, uint _dna) private {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        zombies.push(Zombie(_name, _dna));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 定义一个生成随机DNA的函数, 它是个私有函数, 只读取数据, 返回一个无符号整数.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _generateRandomDna(string _str) private view returns (uint) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>生成随机数: keccak256()函数可以通过输入的字符串返回16进制随机数(当然不太安全).</p></li><li><p>类型转换: 由于keccak256返回的是16进制随机数, 所以我们需要将类型转化成我们可以处理的类型.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie[] public zombies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _createZombie(string _name, uint _dna) private {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        zombies.push(Zombie(_name, _dna));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _generateRandomDna(string _str) private view returns (uint) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 生成uint类型的随机数.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint rand = uint(keccak256(_str));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 取余数保证是16位.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return rand % dnaModulus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>创建供外部调用的接口</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie[] public zombies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _createZombie(string _name, uint _dna) private {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        zombies.push(Zombie(_name, _dna));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _generateRandomDna(string _str) private view returns (uint) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint rand = uint(keccak256(_str));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return rand % dnaModulus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 创建一个公共函数, 调用其他函数.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function createRandomZombie(string _name) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint randDna = _generateRandomDna(_name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _createZombie(_name, randDna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4事件与外部调用">4.事件与外部调用<a href="#4事件与外部调用" class="hash-link" aria-label="4.事件与外部调用的直接链接" title="4.事件与外部调用的直接链接">​</a></h3><hr><ul><li>事件: 合约和区块链通讯的一种机制. 前端应用“监听”某些事件，并做出反应.</li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 创建事件.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    event NewZombie(uint zombieId, string name, uint dna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie[] public zombies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _createZombie(string _name, uint _dna) private {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 返回出的id是Zombie在zombies中的索引.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint id = zombies.push(Zombie(_name, _dna)) - 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 将数据传入到事件中, 触发事件.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NewZombie(id, _name, _dna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _generateRandomDna(string _str) private view returns (uint) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint rand = uint(keccak256(_str));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return rand % dnaModulus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function createRandomZombie(string _name) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint randDna = _generateRandomDna(_name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _createZombie(_name, randDna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Web3.js: 通过Web3.js, 我们可以从前端调用合约的方法等.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="第二课-僵尸与人类生成新僵尸">第二课: 僵尸与人类生成新僵尸<a href="#第二课-僵尸与人类生成新僵尸" class="hash-link" aria-label="第二课: 僵尸与人类生成新僵尸的直接链接" title="第二课: 僵尸与人类生成新僵尸的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-项目概述-1">1. 项目概述<a href="#1-项目概述-1" class="hash-link" aria-label="1. 项目概述的直接链接" title="1. 项目概述的直接链接">​</a></h3><hr><p>僵尸吃了人类以后, 可以随机变成新的僵尸. 我们在本课中会尝试实现这么一个&quot;融合&quot;的功能.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-映射地址msgsender">2. 映射,地址,Msg.sender<a href="#2-映射地址msgsender" class="hash-link" aria-label="2. 映射,地址,Msg.sender的直接链接" title="2. 映射,地址,Msg.sender的直接链接">​</a></h3><hr><ul><li><p>映射: 本质上是存储和查找数据所用的键-值对. 类似Python中的字典.</p></li><li><p>地址: 类似银行账号, 应用账户, 作为僵尸主人的ID.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    event NewZombie(uint zombieId, string name, uint dna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie[] public zombies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 创建两个映射, 规定键和值的类型.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (uint =&gt; address) public zombieToOwner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (address =&gt; uint) ownerZombieCount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _createZombie(string _name, uint _dna) private {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint id = zombies.push(Zombie(_name, _dna)) - 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NewZombie(id, _name, _dna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _generateRandomDna(string _str) private view returns (uint) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint rand = uint(keccak256(_str));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return rand % dnaModulus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function createRandomZombie(string _name) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint randDna = _generateRandomDna(_name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _createZombie(_name, randDna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>msg.sender: 在Solidity中, 有一些全局变量可以被所有函数调用. 其中一个就是msg.sender, 它指的是当前调用者(或智能合约)的address.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    event NewZombie(uint zombieId, string name, uint dna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaDigits = 16;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint dnaModulus = 10 ** dnaDigits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Zombie {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint dna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie[] public zombies;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (uint =&gt; address) public zombieToOwner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (address =&gt; uint) ownerZombieCount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _createZombie(string _name, uint _dna) private {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint id = zombies.push(Zombie(_name, _dna)) - 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 在mapping中加入/更新键值对</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        zombieToOwner[id] = msg.sender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ownerZombieCount[msg.sender]++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NewZombie(id, _name, _dna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _generateRandomDna(string _str) private view returns (uint) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint rand = uint(keccak256(_str));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return rand % dnaModulus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function createRandomZombie(string _name) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint randDna = _generateRandomDna(_name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _createZombie(_name, randDna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-require与分割代码">3. require与分割代码<a href="#3-require与分割代码" class="hash-link" aria-label="3. require与分割代码的直接链接" title="3. require与分割代码的直接链接">​</a></h3><hr><ul><li><p>require: 使得函数在执行过程中, 当不满足某些条件时抛出错误, 并停止执行.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function createRandomZombie(string _name) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 要求只能创建一只</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(ownerZombieCount[msg.sender] == 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint randDna = _generateRandomDna(_name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        _createZombie(_name, randDna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>继承: 当代码过于冗长的时候, 最好将代码和逻辑分拆到多个不同的合约中, 以便于管理. 子合约内可以访问父合约内的public方法.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 继承ZombieFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFeeding is ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>import: 当你有多个文件并且想把一个文件导入另一个文件时, 可以使用 import 语句.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import &quot;./zombiefactory.sol&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFeeding is ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-storage与memory">4. storage与memory<a href="#4-storage与memory" class="hash-link" aria-label="4. storage与memory的直接链接" title="4. storage与memory的直接链接">​</a></h3><hr><ul><li><p>storage与memory: Storage变量是指永久存储在区块链中的变量; Memory变量则是临时的, 当外部函数对某合约调用完成时, 内存型变量即被移除. 大多数时候都用不到这些关键字, 默认情况下Solidity和IDE会自动处理它们, 或者给你一些提醒.</p><p>示例:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Sandwich mySandwich = sandwiches[_index];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ^ 看上去很直接，不过Solidity将会给出警告</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 告诉你应该明确在这里定义 `storage` 或者 `memory`。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 所以你应该明确定义 `storage`:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sandwich storage mySandwich = sandwiches[_index];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ...这样 `mySandwich` 是指向合约状态里`sandwiches[_index]`的指针</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 如果你只想要一个副本，可以使用`memory`:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sandwich memory anotherSandwich = sandwiches[_index + 1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 不过你可以这样做, 直接把副本的改动保存回区块链存储:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sandwiches[_index + 1] = anotherSandwich;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import &quot;./zombiefactory.sol&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFeeding is ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function feedAndMultiply(uint _zombieId, uint _targetDna) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(msg.sender == zombieToOwner[_zombieId]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie storage myZombie = zombies[_zombieId];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // start here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-函数的高级操作">5. 函数的高级操作<a href="#5-函数的高级操作" class="hash-link" aria-label="5. 函数的高级操作的直接链接" title="5. 函数的高级操作的直接链接">​</a></h3><ul><li><p>完善ZombieBreeding</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.19;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import &quot;./zombiefactory.sol&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFeeding is ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function feedAndMultiply(uint _zombieId, uint _targetDna) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(msg.sender == zombieToOwner[_zombieId]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zombie storage myZombie = zombies[_zombieId];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 拿到继承的myZombie的DNA, 并且计算出新Zombie的DNA, 生成Zombie.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _targetDna = _targetDna % dnaModulus;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint newDna = (myZombie.dna + _targetDna) / 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _createZombie(&quot;NoName&quot;, newDna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>internal:如果某个合约继承自其父合约, 这个合约即可以访问父合约中定义的“内部”函数, private访问不到.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 修改可见性为internal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _createZombie(string _name, uint _dna) internal {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint id = zombies.push(Zombie(_name, _dna)) - 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        zombieToOwner[id] = msg.sender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ownerZombieCount[msg.sender]++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NewZombie(id, _name, _dna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>external: 与public类似, 只不过这些函数只能在合约之外调用.</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="6-嘉然僵尸今天吃什么">6. <del>嘉然</del>僵尸今天吃什么<a href="#6-嘉然僵尸今天吃什么" class="hash-link" aria-label="6-嘉然僵尸今天吃什么的直接链接" title="6-嘉然僵尸今天吃什么的直接链接">​</a></h3><ul><li><p><del>嘉然🤤</del>僵尸最喜欢吃的是cryptokitties! 我们现在需要让我们的合约与cryptokitties的合约产生交互, 读取它的数据.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 定义Kitty接口, 复制getKitty的内容.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract KittyInterface {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function getKitty(uint256 _id) external view returns (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool isGestating,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool isReady,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 cooldownIndex,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 nextActionAt,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 siringWithId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 birthTime,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 matronId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 sireId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 generation,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 genes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>接下去在我们的合约中调用这个接口.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFeeding is ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  address ckAddress = 0x06012c8cf97BEaD5deAe237070F9587f8E7A266d;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // 通过给的地址, 初始化kittyContract</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  KittyInterface kittyContract = KittyInterface(ckAddress)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>处理getKitty接口的多个返回值.</p></li></ul><p>示例:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function multipleReturns() internal returns(uint a, uint b, uint c) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return (1, 2, 3);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function processMultipleReturns() external {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint a;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint b;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint c;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (a, b, c) = multipleReturns();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 或者如果我们只想返回其中一个变量:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function getLastReturnValue() external {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint c;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (,,c) = multipleReturns();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function feedOnKitty(uint _zombieId, uint _kittyId) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 定义一个kittyDna.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      uint kittyDna;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 将返回的最后一个值赋给kittyDna.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      (,,,,,,,,,kittyDna) = kittyContract.getKitty(_kittyId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // 传入到feedAndMultiply.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      feedAndMultiply(_zombieId, kittyDna);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="第三课-高级solidity理论">第三课: 高级Solidity理论<a href="#第三课-高级solidity理论" class="hash-link" aria-label="第三课: 高级Solidity理论的直接链接" title="第三课: 高级Solidity理论的直接链接">​</a></h2><p>Code is Law. 你所编译的智能合约会永久存储在以太坊上, 所以安全性和有效性是极其重要的.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-可持续性和安全性">1. 可持续性和安全性<a href="#1-可持续性和安全性" class="hash-link" aria-label="1. 可持续性和安全性的直接链接" title="1. 可持续性和安全性的直接链接">​</a></h3><ul><li><p>我们使用了cryptokitties的合约地址, 但如果cryptokitties没了, 那我们的应用也会无法运行.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFeeding is ZombieFactory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  KittyInterface kittyContract;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // setKittyContractAddress运行时再设定cryptokitties的地址</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function setKittyContractAddress(address _address) external {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kittyContract = KittyInterface(_address);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>onlyOwner: 设定external函数为只能由主人调用.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 导入openZepplin库的Ownable合约</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import &quot;./ownable.sol&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ZombieFactory is Ownable {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// modifier onlyOwner() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  require(msg.sender == owner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//  _;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 设置函数为只有主人才能调用.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  function setKittyContractAddress(address _address) external onlyOwner {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kittyContract = KittyInterface(_address);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><blockquote><p>未完待续</p></blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Blockchain/fisco-ubuntu/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">📠 Ubuntu搭建Fisco区块链</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Blockchain/fisco-arm-mac/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">💪 Arm Mac搭建Fisco区块链</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#第一课-搭建僵尸工厂" class="table-of-contents__link toc-highlight">第一课: 搭建僵尸工厂</a><ul><li><a href="#1-项目概述" class="table-of-contents__link toc-highlight">1. 项目概述</a></li><li><a href="#2-基本数据结构" class="table-of-contents__link toc-highlight">2. 基本数据结构</a></li><li><a href="#3-函数的基本操作" class="table-of-contents__link toc-highlight">3. 函数的基本操作</a></li><li><a href="#4事件与外部调用" class="table-of-contents__link toc-highlight">4.事件与外部调用</a></li></ul></li><li><a href="#第二课-僵尸与人类生成新僵尸" class="table-of-contents__link toc-highlight">第二课: 僵尸与人类生成新僵尸</a><ul><li><a href="#1-项目概述-1" class="table-of-contents__link toc-highlight">1. 项目概述</a></li><li><a href="#2-映射地址msgsender" class="table-of-contents__link toc-highlight">2. 映射,地址,Msg.sender</a></li><li><a href="#3-require与分割代码" class="table-of-contents__link toc-highlight">3. require与分割代码</a></li><li><a href="#4-storage与memory" class="table-of-contents__link toc-highlight">4. storage与memory</a></li><li><a href="#5-函数的高级操作" class="table-of-contents__link toc-highlight">5. 函数的高级操作</a></li><li><a href="#6-嘉然僵尸今天吃什么" class="table-of-contents__link toc-highlight">6. <del>嘉然</del>僵尸今天吃什么</a></li></ul></li><li><a href="#第三课-高级solidity理论" class="table-of-contents__link toc-highlight">第三课: 高级Solidity理论</a><ul><li><a href="#1-可持续性和安全性" class="table-of-contents__link toc-highlight">1. 可持续性和安全性</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro/">About</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Blockchain/thoughts/">Blockchain</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Code/incubate/">Code</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Sports/racquets/">Sports</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Music/music-n-me/">Music</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Life/valley/">Life</a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://sny.is/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linktree<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://fewwwww.github.io/WeChat-AddMe/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WeChat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://suningyao.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Portfolio<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/fewwwww/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">💗Thank U for reading~💗</div><ul class="footer__items clean-list"></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Suning Yao's Blog. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fb2df4a2.js"></script>
<script src="/assets/js/main.d6940a7e.js"></script>
</body>
</html>