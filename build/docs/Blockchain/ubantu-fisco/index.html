<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<title data-react-helmet="true">搭建FISCO BCOS区块链网络(Ubuntu 16.04 64bit) | Blogs</title><meta data-react-helmet="true" property="og:url" content="https://fewwwww.github.io/docs/Blockchain/ubantu-fisco"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="搭建FISCO BCOS区块链网络(Ubuntu 16.04 64bit) | Blogs"><meta data-react-helmet="true" name="description" content="1. 搭建单群组四节点FISCO BCOS联盟链"><meta data-react-helmet="true" property="og:description" content="1. 搭建单群组四节点FISCO BCOS联盟链"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://fewwwww.github.io/docs/Blockchain/ubantu-fisco"><link data-react-helmet="true" rel="alternate" href="https://fewwwww.github.io/docs/Blockchain/ubantu-fisco" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://fewwwww.github.io/docs/Blockchain/ubantu-fisco" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.9e4a0a7d.css">
<link rel="preload" href="/assets/js/runtime~main.e4625b6f.js" as="script">
<link rel="preload" href="/assets/js/main.9cc731b6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">blog.suningyao</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/fewwwww/blog.suningyao.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">blog.suningyao</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/intro">docs</a></li><li class="menu__list-item"><a href="https://github.com/fewwwww/blog.suningyao.com" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">Suning Yao</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Blockchain🔒⛓️</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/erc">ERC标准以及NFT应用开发</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/Blockchain/ubantu-fisco">Ubantu搭建Fisco BcoS区块链</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Blockchain/arm-mac-fisco">Arm Mac搭建Fisco BcoS区块链</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">搭建FISCO BCOS区块链网络(Ubuntu 16.04 64bit)</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-搭建单群组四节点fisco-bcos联盟链"></a>1. 搭建单群组四节点FISCO BCOS联盟链<a class="hash-link" href="#1-搭建单群组四节点fisco-bcos联盟链" title="Direct link to heading">#</a></h2><p>使用开发部署工具build_chain.sh脚本快速搭建FISCO BCOS区块链, 本次以Ubuntu 16.04 64bit系统为例操作.</p><p>部署工具build_chain脚本目标是让用户最快地搭建，对于企业级应用部署FISCO BCOS请参考运维部署工具.</p><p>官方推荐下载预编译程序进行使用. 同时提供<a href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/get_executable.html" target="_blank" rel="noopener noreferrer">Docker程序与未编译源码</a>.</p><blockquote><p>ARM架构linux与X86架构macOS需要自行编译, ARM架构macOS暂未适配.</p><p>CentOS系统下openssl默认路径在开始搭建时可能会出现路径错误.</p><p>推荐新手开发者使用Ubuntu平台搭建.</p></blockquote><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第一步-安装依赖"></a>第一步: 安装依赖<a class="hash-link" href="#第一步-安装依赖" title="Direct link to heading">#</a></h3><ul><li>使用build_chain.sh脚本需要先安装openssl与curl.
因此先安装这两个依赖.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install -y openssl curl</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第二步-创建目录-下载脚本"></a>第二步: 创建目录, 下载脚本<a class="hash-link" href="#第二步-创建目录-下载脚本" title="Direct link to heading">#</a></h3><ul><li>首先创建fisco目录, 并且进入刚创建的目录.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~ &amp;&amp; mkdir -p fisco &amp;&amp; cd fisco</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>通过curl下载build_chain.sh脚本</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">curl -#LO https://github.com/FISCO-BCOS/FISCO-BCOS/releases/download/v2.7.2/build_chain.sh &amp;&amp; chmod u+x build_chain.sh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>如果因为网络问题无法正常下载, 可以尝试更换链接
<code>curl -#LO https://osp-1257653870.cos.ap-guangzhou.myqcloud.com/FISCO-BCOS/FISCO-BCOS/releases/v2.7.2/build_chain.sh &amp;&amp; chmod u+x build_chain.sh</code></p></blockquote><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第三步-搭建联盟链"></a>第三步: 搭建联盟链<a class="hash-link" href="#第三步-搭建联盟链" title="Direct link to heading">#</a></h3><p>注意要确保机器的30300~30303，20200~20203，8545~8548端口没有被占用, 否则会导致后续无法成功搭建.</p><ul><li>在fisco目录下执行指令, 生成一条单群组4节点的FISCO链.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">bash build_chain.sh -l 127.0.0.1:4 -p 30300,20200,8545</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>-p选项为起始端口, 30300为p2p_port, 20200为channel_port, 8545为jsonrpc_port.
更多搭建时的选项可以参考<a href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/manual/build_chain.html" target="_blank" rel="noopener noreferrer">开发部署工具</a>.</p></blockquote><p>命令执行成功会在最后一行显示<code>[INFO] All completed. Files in /home/ubuntu/fisco/nodes</code></p><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第四步-启动节点"></a>第四步: 启动节点<a class="hash-link" href="#第四步-启动节点" title="Direct link to heading">#</a></h3><ul><li>通过脚本启动所有所有节点</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">bash nodes/127.0.0.1/start_all.sh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>四个节点均启动成功时会显示</p><blockquote><p>try to start node0</p><p>try to start node1</p><p>try to start node2</p><p>try to start node3</p><p>node0 start successfully</p><p>node1 start successfully</p><p>node2 start successfully</p><p>node3 start successfully</p></blockquote><ul><li>验证节点是否被成功启动</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">ps -ef | grep -v grep | grep fisco-bcos</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>若显示四行数据, 则FISCO BCOS链成功启动</p></blockquote><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第五步-检查日志输出"></a>第五步: 检查日志输出<a class="hash-link" href="#第五步-检查日志输出" title="Direct link to heading">#</a></h3><ul><li>查看节点链接的其他节点个数</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">tail -f nodes/127.0.0.1/node0/log/log*  | grep connected</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如果输出正常中每十秒会弹出一行信息.</p><blockquote><p>info|2021-06-25 09:06:04.855163|[P2P][Service] heartBeat,connected count=3</p><p>info|2021-06-25 09:06:14.859185|[P2P][Service] heartBeat,connected count=3</p><p>info|2021-06-25 09:06:24.863178|[P2P][Service] heartBeat,connected count=3</p></blockquote><p>输出中可以看到第0个节点与其他3个节点相连.</p><p>如果检查其他节点, 输出信息相同.</p><ul><li>检查链中是否存在共识</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">tail -f nodes/127.0.0.1/node0/log/log*  | grep +++</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如果共识正常会弹出如下信息.</p><blockquote><p>info|2021-06-25 08:59:58.199388|[g:1][CONSENSUS][SEALER]++++++++++++++++ Generating seal on,blkNum=1,tx=0,nodeIdx=2,hash=c7e899af...</p><p>info|2021-06-25 09:08:20.095493|[g:1][CONSENSUS][SEALER]++++++++++++++++ Generating seal on,blkNum=1,tx=0,nodeIdx=2,hash=fbe312af...</p><p>info|2021-06-25 09:08:24.135362|[g:1][CONSENSUS][SEALER]++++++++++++++++ Generating seal on,blkNum=1,tx=0,nodeIdx=2,hash=6e7ef1a2...</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-配置与使用控制台"></a>2. 配置与使用控制台<a class="hash-link" href="#2-配置与使用控制台" title="Direct link to heading">#</a></h2><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第一步-准备控制台依赖"></a>第一步: 准备控制台依赖<a class="hash-link" href="#第一步-准备控制台依赖" title="Direct link to heading">#</a></h3><p>我们通过脚本下载的程序为最新版本.
2.6版本之后的控制台均用Java SDK实现.</p><p>新版控制台文档参考<a href="https://fisco-bcos-documentation.readthedocs.io/zh_CN/latest/docs/console/console_of_java_sdk.html" target="_blank" rel="noopener noreferrer">此处</a>.</p><ul><li>安装Java</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install -y default-jdk</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>回到fisco目录并且下载并运行download_console的脚本</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/fisco &amp;&amp; curl -LO https://github.com/FISCO-BCOS/console/releases/download/v2.7.2/download_console.sh &amp;&amp; bash download_console.sh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>如果因为网络问题无法正常下载, 可以尝试将中间的链接替换为
<code>curl -#LO https://gitee.com/FISCO-BCOS/console/raw/master/tools/download_console.sh</code></p></blockquote><ul><li>将默认的控制台配置拷贝到对应的路径与名称</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">cp -n console/conf/config-example.toml console/conf/config.toml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>将控制台证书拷贝到对应路径</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">cp -r nodes/127.0.0.1/sdk/* console/conf/</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第二步-启动并使用控制台"></a>第二步: 启动并使用控制台<a class="hash-link" href="#第二步-启动并使用控制台" title="Direct link to heading">#</a></h3><ul><li>进入控制台路径并启动控制台</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/fisco/console &amp;&amp; bash start.sh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>控制台启动成功后会显示版本号以及由$符号组成的ASCII art</p><blockquote><p>Welcome to FISCO BCOS console(2.7.2)!</p></blockquote><ul><li>在控制台中获取信息</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">===================================================</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[group:1]&gt; getNodeVersion</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ClientVersion{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    version=&#x27;2.7.2&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    supportedVersion=&#x27;2.7.2&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    chainId=&#x27;1&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    buildTime=&#x27;20210201 10:03:03&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    buildType=&#x27;Linux/clang/Release&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    gitBranch=&#x27;HEAD&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    gitCommitHash=&#x27;4c8a5bbe44c19db8a002017ff9dbb16d3d28e9da&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[group:1]&gt; getPeers</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    PeerInfo{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        nodeID=&#x27;6d9f62cea16879e16ffe4004c64fa717b62c3853c915f79306972da0dac4133f25b97bedfe522d982a3fd606c2ac90ef085a45f1786ea1e5dbd4ad8fdd57b97e&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        iPAndPort=&#x27;127.0.0.1:50050&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        node=&#x27;node3&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        agency=&#x27;agency&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        topic=&#x27;[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    PeerInfo{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        nodeID=&#x27;fae1c9ff63b77de57759555d0cfcf01f43db418f7d75ecc969c1262364b3d6ae0d53ae92e05adf259e4a56f91369d66ca29c4e9c4e8a6342d23bbdcd9e2fb4ab&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        iPAndPort=&#x27;127.0.0.1:50042&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        node=&#x27;node1&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        agency=&#x27;agency&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        topic=&#x27;[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            _block_notify_1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    PeerInfo{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        nodeID=&#x27;4fd5a7d73b3f002e76c2e1adbcbdbc0903197a2a10cf449ddc6507d33cd050e414b52aef9d5444f9206aec2cfc0d976e235b10fd9d4fa56c8168e59a6b234ada&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        iPAndPort=&#x27;127.0.0.1:30302&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        node=&#x27;node2&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        agency=&#x27;agency&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        topic=&#x27;[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3-部署并调用helloworld的智能合约"></a>3. 部署并调用HelloWorld的智能合约<a class="hash-link" href="#3-部署并调用helloworld的智能合约" title="Direct link to heading">#</a></h2><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第一步-部署合约"></a>第一步: 部署合约<a class="hash-link" href="#第一步-部署合约" title="Direct link to heading">#</a></h3><ul><li>为了方便用户快速体验, HelloWorld的合约已经内置于控制台中, 位于控制台目录下contracts/solidity/HelloWorld.sol. 我们直接部署HelloWorld合约.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">deploy HelloWorld</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>合约具体内容为:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.24;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contract HelloWorld {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 声明变量name</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    string name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 将name值更新为Hello, World!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function HelloWorld() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        name = &quot;Hello, World!&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 调用get方法时返回name的值</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function get()constant returns(string) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 调用set方法时修改name的值为n</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function set(string n) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        name = n;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>部署成功后会返回合约地址:</p><blockquote><p>transaction hash: 0x24d98970eb355755f66f8b5e8ba4b94a1e69de0ef53fdff9f0a011ce4c57bdaa</p><p>contract address: {address hash}</p><p>currentAccount: 0xe6925c66ad07d894f066a2229addb2b350d373c3</p></blockquote><ul><li>查看当前区块高度, 调用get接口获取name变量</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[group:1]&gt; getBlockNumber</span></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[group:1]&gt; call HelloWorld {address hash} get</span></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return code: 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">description: transaction executed successfully</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return message: Success</span></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value size:1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return types: (STRING)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return values:(Hello, World!)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[group:1]&gt; getBlockNumber</span></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>get接口不会改变账本状态, 所以调用之后区块高度仍然为1.</p><ul><li>调用set接口设置name变量</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[group:1]&gt; call HelloWorld {address hash} set &quot;Hello, Fisco BcoS&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">transaction hash: 0x08e2f53419d1e327aa38fa3ce3d6e529927e4f2bac05bea757406b27bf122f1d</span></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">transaction status: 0x0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">description: transaction executed successfully</span></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Receipt message: Success</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return message: Success</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return values:[]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Event logs</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Event: {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[group:1]&gt; getBlockNumber</span></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[group:1]&gt; call HelloWorld {address hash} get</span></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return code: 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">description: transaction executed successfully</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return message: Success</span></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return value size:1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return types: (STRING)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Return values:(Hello, Fisco BcoS)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------------------------------------------</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>再次查看区块高度会发现高度已改变, 再次调用get接口发现返回值已经修改为我们set的值.</p><header><h1 class="h1Heading_27L5">FISCO BCOS区块链简易的资产管理的开发全过程</h1></header><p>我们将会开发一个简易的资产管理的系统，并最终实现以下功能：</p><ul><li>能够在区块链上进行资产账户注册</li><li>能够实现不同账户之间的转账</li><li>可以查询账户的资产金额</li></ul><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第一步-应用程序设计"></a>第一步: 应用程序设计<a class="hash-link" href="#第一步-应用程序设计" title="Direct link to heading">#</a></h3><ul><li><strong>存储设计:</strong></li></ul><p>针对需要实现的功能, 本应用需要设计存储资产管理的表t_asset. 内容如下:</p><table><thead><tr><th>account</th><th>asset_value</th></tr></thead><tbody><tr><td>Alex</td><td>1000</td></tr><tr><td>Bob</td><td>2000</td></tr></tbody></table><ul><li><strong>接口设计:</strong></li></ul><p>按照业务的设计目标，需要实现资产注册，转账，查询资产金额功能，对应功能的接口如下:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// 查询账户的资产金额</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   return值一： 成功找到账户返回0, 账户不存在返回-1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   return值二： 资产金额(第一个参数为0时有效)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function select(string account) public constant returns(int256, uint256)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 资产账户注册</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   0  资产账户注册成功</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   -1 资产账户已存在</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   -2 其他错误</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function register(string account, uint256 amount) public returns(int256)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 账户间的资产转移</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   返回值：</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   0  资产转移成功</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   -1 转移资产账户不存在</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   -2 接收资产账户不存在</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   -3 金额不足</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   -4 金额溢出</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   -5 其他错误</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function transfer(string from_asset_account, string to_asset_account, uint256 amount) public returns(int256)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第二步-开发接口源码"></a>第二步: 开发接口源码<a class="hash-link" href="#第二步-开发接口源码" title="Direct link to heading">#</a></h3><ul><li>编写智能合约</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// 进入console/contracts/solidity目录</span></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/fisco/console/contracts/solidity</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 创建Asset.sol合约文件, 进入文件的编写</span></span><span class="token-line" style="color:#393A34"><span class="token plain">vi Asset.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 将合约内容写入Asset.sol文件.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// ** 重要: vim中保存退出为:wq **</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Assert.sol的内容如下:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.24;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Table.sol已在~/fisco/console/contracts/solidity目录下.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 该系统合约文件中的接口由FISCO BCOS底层实现.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 当业务合约需要操作CRUD接口时，均需要引入该接口合约文件.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import &quot;./Table.sol&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contract Asset {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event RegisterEvent(int256 ret, string account, uint256 asset_value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event TransferEvent(int256 ret, string from_account, string to_account, uint256 amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor() public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 构造函数中创建t_asset表</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        createTable();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function createTable() private {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        TableFactory tf = TableFactory(0x1001);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 资产管理表, key : account, field : asset_value</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // |      资产账户(key)   |   资产金额(field)   |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // |-------------------- |-------------------|</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // |        account      |    asset_value    |</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // |---------------------|-------------------|</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        tf.createTable(&quot;t_asset&quot;, &quot;account&quot;, &quot;asset_value&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function openTable() private returns(Table) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        TableFactory tf = TableFactory(0x1001);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Table table = tf.openTable(&quot;t_asset&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return table;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /*</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    描述 : 根据资产账户查询资产金额</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    参数 ：</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            account : 资产账户</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    返回值：</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            参数一： 成功找到账户返回0, 账户不存在返回-1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            参数二： 资产金额(第一个参数为0时有效)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function select(string account) public constant returns(int256, uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 打开表</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Table table = openTable();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 查询</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Entries entries = table.select(account, table.newCondition());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 asset_value = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (0 == uint256(entries.size())) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return (-1, asset_value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Entry entry = entries.get(0);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return (0, uint256(entry.getInt(&quot;asset_value&quot;)));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /*</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    描述 : 资产注册</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    参数 ：</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            account : 资产账户</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            amount  : 资产金额</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    返回值：</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            0  资产账户注册成功</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            -1 资产账户已存在</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            -2 其他错误</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function register(string account, uint256 asset_value) public returns(int256){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        int256 ret_code = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        int256 ret= 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 temp_asset_value = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 查询账户是否存在</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        (ret, temp_asset_value) = select(account);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(ret != 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Table table = openTable();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Entry entry = table.newEntry();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            entry.set(&quot;account&quot;, account);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            entry.set(&quot;asset_value&quot;, int256(asset_value));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 插入</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            int count = table.insert(account, entry);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (count == 1) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 成功</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                ret_code = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 失败? 无权限或者其他错误</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                ret_code = -2;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 账户已存在</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ret_code = -1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit RegisterEvent(ret_code, account, asset_value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ret_code;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /*</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    描述 : 资产转移</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    参数 ：</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from_account : 转移资产的账户</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            to_account ： 接收资产的账户</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            amount ： 转移金额数量</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    返回值：</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            0  资产转移成功</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            -1 转移资产账户不存在</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            -2 接收资产账户不存在</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            -3 金额不足</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            -4 金额溢出</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            -5 其他错误</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function transfer(string from_account, string to_account, uint256 amount) public returns(int256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 查询转移资产账户信息</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        int ret_code = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        int256 ret = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 from_asset_value = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 to_asset_value = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 转移账户是否存在?</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        (ret, from_asset_value) = select(from_account);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(ret != 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ret_code = -1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 转移账户不存在</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit TransferEvent(ret_code, from_account, to_account, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return ret_code;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 接受账户是否存在?</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        (ret, to_asset_value) = select(to_account);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(ret != 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ret_code = -2;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 接收资产的账户不存在</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit TransferEvent(ret_code, from_account, to_account, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return ret_code;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(from_asset_value &lt; amount) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ret_code = -3;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 转移资产的账户金额不足</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit TransferEvent(ret_code, from_account, to_account, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return ret_code;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (to_asset_value + amount &lt; to_asset_value) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ret_code = -4;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 接收账户金额溢出</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit TransferEvent(ret_code, from_account, to_account, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return ret_code;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Table table = openTable();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Entry entry0 = table.newEntry();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        entry0.set(&quot;account&quot;, from_account);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        entry0.set(&quot;asset_value&quot;, int256(from_asset_value - amount));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 更新转账账户</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        int count = table.update(from_account, entry0, table.newCondition());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(count != 1) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ret_code = -5;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 失败? 无权限或者其他错误?</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            emit TransferEvent(ret_code, from_account, to_account, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return ret_code;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Entry entry1 = table.newEntry();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        entry1.set(&quot;account&quot;, to_account);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        entry1.set(&quot;asset_value&quot;, int256(to_asset_value + amount));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 更新接收账户</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        table.update(to_account, entry1, table.newCondition());</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit TransferEvent(ret_code, from_account, to_account, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ret_code;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>保存并退出后运行ls, 可以看到Assert.sol和Table.sol.</li></ul><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第三步-编译智能合约"></a>第三步: 编译智能合约<a class="hash-link" href="#第三步-编译智能合约" title="Direct link to heading">#</a></h3><p>控制台提供的编译工具可以编译出ABI和BIN文件, 使得.sol文件可以部署到区块链上.</p><p>同时还会自动生成一个与编译的智能合约同名的根据ABI生成的合约Java类.
这个Java类帮助用户解析好了参数, 提供同名的方法.</p><p>当应用需要部署和调用合约时, 可以直接调用该合约类的对应方法, 传入指定参数即可.</p><ul><li>编译合约</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// 切换到fisco/console/目录</span></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/fisco/console/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 编译合约, 指定Java的包名参数</span></span><span class="token-line" style="color:#393A34"><span class="token plain">./sol2java.sh org.fisco.bcos.asset.contract</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>运行成功后会显示<code>INFO: Compile for solidity TableTest.sol success.</code></p><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="第四步-创建区块链应用项目"></a>第四步: 创建区块链应用项目<a class="hash-link" href="#第四步-创建区块链应用项目" title="Direct link to heading">#</a></h3><blockquote><p>本步骤项目源码可以通过如下命令直接获得, 获得后可以直接跳过本步骤:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/fisco</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -#LO https://github.com/FISCO-BCOS/LargeFiles/raw/master/tools/asset-app.tar.gz</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"># 解压得到Java工程项目asset-app</span></span><span class="token-line" style="color:#393A34"><span class="token plain">tar -zxf asset-app.tar.gz</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></blockquote><ol><li>安装Java与IDE</li></ol><p>在开发环境下载Java JDK 14(JDK1.8 至JDK 14都支持); 下载IntelliJ IDE.</p><ol start="2"><li>创建Java工程</li></ol><p>在IntelliJ IDE中创建一个新项目, 选择Gradle, 勾选Java, 输入工程名.</p><ol start="3"><li>引入Java SDK</li></ol><p>在build.gradle文件中替换repositories, 加入Java SDK的引用.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">repositories {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mavenCentral()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    maven {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        url &quot;http://maven.aliyun.com/nexus/content/groups/public/&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    maven { url &quot;https://oss.sonatype.org/content/repositories/snapshots&quot; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>将dependencies替换, 引入Java SDK jar包.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    testCompile group: &#x27;junit&#x27;, name: &#x27;junit&#x27;, version: &#x27;4.12&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile (&#x27;org.fisco-bcos.java-sdk:fisco-bcos-java-sdk:2.7.2&#x27;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol start="4"><li>配置SDK证书</li></ol><ul><li>修改build.gradle文件, 引入Spring框架.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// 加入</span></span><span class="token-line" style="color:#393A34"><span class="token plain">def spring_version = &quot;4.3.27.RELEASE&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">List spring = [</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;org.springframework:spring-core:$spring_version&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;org.springframework:spring-beans:$spring_version&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;org.springframework:spring-context:$spring_version&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;org.springframework:spring-tx:$spring_version&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">//替换</span></span><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    testCompile group: &#x27;junit&#x27;, name: &#x27;junit&#x27;, version: &#x27;4.12&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile (&quot;org.fisco-bcos.java-sdk:fisco-bcos-java-sdk:2.7.2&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile spring</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>在<code>asset-app/test/resources</code>目录下创建配置文件<code>applicationContext.xml</code>, 写入配置内容(如下).</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://www.springframework.org/schema/beans/spring-beans-4.0.xsd&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;bean id=&quot;defaultConfigProperty&quot; class=&quot;org.fisco.bcos.sdk.config.model.ConfigProperty&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;property name=&quot;cryptoMaterial&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;map&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;entry key=&quot;certPath&quot; value=&quot;conf&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/map&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/property&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;property name=&quot;network&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;map&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;entry key=&quot;peers&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;list&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;value&gt;127.0.0.1:20200&lt;/value&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;value&gt;127.0.0.1:20201&lt;/value&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/list&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/entry&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/map&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/property&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;property name=&quot;account&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;map&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;entry key=&quot;keyStoreDir&quot; value=&quot;account&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;entry key=&quot;accountAddress&quot; value=&quot;&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;entry key=&quot;accountFileFormat&quot; value=&quot;pem&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;entry key=&quot;password&quot; value=&quot;&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;entry key=&quot;accountFilePath&quot; value=&quot;&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/map&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/property&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;property name=&quot;threadPool&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;map&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;entry key=&quot;channelProcessorThreadSize&quot; value=&quot;16&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;entry key=&quot;receiptProcessorThreadSize&quot; value=&quot;16&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;entry key=&quot;maxBlockingQueueSize&quot; value=&quot;102400&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/map&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/property&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/bean&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;bean id=&quot;defaultConfigOption&quot; class=&quot;org.fisco.bcos.sdk.config.ConfigOption&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;constructor-arg name=&quot;configProperty&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;ref bean=&quot;defaultConfigProperty&quot;/&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/constructor-arg&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/bean&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;bean id=&quot;bcosSDK&quot; class=&quot;org.fisco.bcos.sdk.BcosSDK&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;constructor-arg name=&quot;configOption&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;ref bean=&quot;defaultConfigOption&quot;/&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/constructor-arg&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/bean&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/beans&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>我们指定了证书存放的位certPath的值为<code>conf</code>, 接下去我们把SDK用于连接节点的证书放到指定的<code>conf</code>目录下. 如果路径不相同, 需要自行调整.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># 假设我们将asset-app放在~/fisco目录下 进入~/fisco目录</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cd ~/fisco</span></span><span class="token-line" style="color:#393A34"><span class="token plain"># 创建放置证书的文件夹</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir -p asset-app/src/test/resources/conf</span></span><span class="token-line" style="color:#393A34"><span class="token plain"># 拷贝节点证书到项目的资源目录</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cp -r nodes/127.0.0.1/sdk/* asset-app/src/test/resources/conf</span></span><span class="token-line" style="color:#393A34"><span class="token plain"># 若在IDE直接运行，拷贝证书到resources路径</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir -p asset-app/src/main/resources/conf</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cp -r nodes/127.0.0.1/sdk/* asset-app/src/main/resources/conf</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol start="5"><li>业务逻辑开发</li></ol><ul><li>通过3中的编译配置进行编译, 将合约引入到项目中.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/fisco</span></span><span class="token-line" style="color:#393A34"><span class="token plain">cp console/contracts/sdk/java/org/fisco/bcos/asset/contract/Asset.java asset-app/src/main/java/org/fisco/bcos/asset/contract/Asset.java</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>开发业务逻辑</li></ul><p>在<code>/src/main/java/org/fisco/bcos/asset/client</code>目录下，创建<code>AssetClient.java</code>类，调用<code>Asset.java</code>实现对合约的部署与调用.</p><p><code>AssetClient.java</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">package org.fisco.bcos.asset.client;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.io.FileNotFoundException;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.io.FileOutputStream;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.io.IOException;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.math.BigInteger;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.List;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.Properties;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.fisco.bcos.asset.contract.Asset;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.fisco.bcos.sdk.BcosSDK;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.fisco.bcos.sdk.abi.datatypes.generated.tuples.generated.Tuple2;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.fisco.bcos.sdk.client.Client;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.fisco.bcos.sdk.crypto.keypair.CryptoKeyPair;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.fisco.bcos.sdk.model.TransactionReceipt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.slf4j.Logger;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.slf4j.LoggerFactory;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.ApplicationContext;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.support.ClassPathXmlApplicationContext;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.core.io.ClassPathResource;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.core.io.Resource;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.core.io.support.PathMatchingResourcePatternResolver;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AssetClient {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    static Logger logger = LoggerFactory.getLogger(AssetClient.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private BcosSDK bcosSDK;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Client client;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private CryptoKeyPair cryptoKeyPair;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void initialize() throws Exception {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 初始化BcoS的SDK</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        @SuppressWarnings(&quot;resource&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ApplicationContext context =</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                new ClassPathXmlApplicationContext(&quot;classpath:applicationContext.xml&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bcosSDK = context.getBean(BcosSDK.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 初始化可向群组1发交易的Client</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        client = bcosSDK.getClient(1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 随机生成发送交易的公钥与私钥, 并且匹配给Client</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        cryptoKeyPair = client.getCryptoSuite().createKeyPair();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        client.getCryptoSuite().setCryptoKeyPair(cryptoKeyPair);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.debug(&quot;create client for group1, account address is &quot; + cryptoKeyPair.getAddress());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void deployAssetAndRecordAddr() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 初次部署合约</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Asset asset = Asset.deploy(client, cryptoKeyPair);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot; deploy Asset success, contract address is &quot; + asset.getContractAddress());</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            recordAssetAddr(asset.getContractAddress());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.println(&quot; deploy Asset contract failed, error message is  &quot; + e.getMessage());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void recordAssetAddr(String address) throws FileNotFoundException, IOException {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Properties prop = new Properties();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        prop.setProperty(&quot;address&quot;, address);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        final Resource contractResource = new ClassPathResource(&quot;contract.properties&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        FileOutputStream fileOutputStream = new FileOutputStream(contractResource.getFile());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        prop.store(fileOutputStream, &quot;contract address&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String loadAssetAddr() throws Exception {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // load Asset contact address from contract.properties</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Properties prop = new Properties();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        final Resource contractResource = new ClassPathResource(&quot;contract.properties&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        prop.load(contractResource.getInputStream());</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        String contractAddress = prop.getProperty(&quot;address&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (contractAddress == null || contractAddress.trim().equals(&quot;&quot;)) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new Exception(&quot; load Asset contract address failed, please deploy it first. &quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.info(&quot; load Asset address from contract.properties, address is {}&quot;, contractAddress);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return contractAddress;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void queryAssetAmount(String assetAccount) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 已知合约地址或已部署合约时加载合约</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            String contractAddress = loadAssetAddr();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Asset asset = Asset.load(contractAddress, client, cryptoKeyPair);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 调用select接口</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Tuple2&lt;BigInteger, BigInteger&gt; result = asset.select(assetAccount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (result.getValue1().compareTo(new BigInteger(&quot;0&quot;)) == 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.printf(&quot; asset account %s, value %s \n&quot;, assetAccount, result.getValue2());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.printf(&quot; %s asset account is not exist \n&quot;, assetAccount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            logger.error(&quot; queryAssetAmount exception, error message is {}&quot;, e.getMessage());</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.printf(&quot; query asset account failed, error message is %s\n&quot;, e.getMessage());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void registerAssetAccount(String assetAccount, BigInteger amount) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            String contractAddress = loadAssetAddr();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Asset asset = Asset.load(contractAddress, client, cryptoKeyPair);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 调用register接口</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            TransactionReceipt receipt = asset.register(assetAccount, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            List&lt;Asset.RegisterEventEventResponse&gt; response = asset.getRegisterEventEvents(receipt);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!response.isEmpty()) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (response.get(0).ret.compareTo(new BigInteger(&quot;0&quot;)) == 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    System.out.printf(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot; register asset account success =&gt; asset: %s, value: %s \n&quot;, assetAccount, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    System.out.printf(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot; register asset account failed, ret code is %s \n&quot;, response.get(0).ret.toString());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot; event log not found, maybe transaction not exec. &quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            logger.error(&quot; registerAssetAccount exception, error message is {}&quot;, e.getMessage());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.printf(&quot; register asset account failed, error message is %s\n&quot;, e.getMessage());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void transferAsset(String fromAssetAccount, String toAssetAccount, BigInteger amount) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            String contractAddress = loadAssetAddr();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Asset asset = Asset.load(contractAddress, client, cryptoKeyPair);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 调用transfer接口</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            TransactionReceipt receipt = asset.transfer(fromAssetAccount, toAssetAccount, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            List&lt;Asset.TransferEventEventResponse&gt; response = asset.getTransferEventEvents(receipt);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!response.isEmpty()) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (response.get(0).ret.compareTo(new BigInteger(&quot;0&quot;)) == 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    System.out.printf(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot; transfer success =&gt; from_asset: %s, to_asset: %s, amount: %s \n&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            fromAssetAccount, toAssetAccount, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    System.out.printf(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot; transfer asset account failed, ret code is %s \n&quot;, response.get(0).ret.toString());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                System.out.println(&quot; event log not found, maybe transaction not exec. &quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // TODO Auto-generated catch block</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // e.printStackTrace();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            logger.error(&quot; registerAssetAccount exception, error message is {}&quot;, e.getMessage());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.out.printf(&quot; register asset account failed, error message is %s\n&quot;, e.getMessage());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void Usage() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot; Usage:&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;\t java -cp conf/:lib/*:apps/* org.fisco.bcos.asset.client.AssetClient deploy&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;\t java -cp conf/:lib/*:apps/* org.fisco.bcos.asset.client.AssetClient query account&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;\t java -cp conf/:lib/*:apps/* org.fisco.bcos.asset.client.AssetClient register account value&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;\t java -cp conf/:lib/*:apps/* org.fisco.bcos.asset.client.AssetClient transfer from_account to_account amount&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.exit(0);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws Exception {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (args.length &lt; 1) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Usage();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        AssetClient client = new AssetClient();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        client.initialize();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        switch (args[0]) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;deploy&quot;:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                client.deployAssetAndRecordAddr();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;query&quot;:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (args.length &lt; 2) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Usage();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                client.queryAssetAmount(args[1]);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;register&quot;:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (args.length &lt; 3) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Usage();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                client.registerAssetAccount(args[1], new BigInteger(args[2]));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;transfer&quot;:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (args.length &lt; 4) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Usage();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                client.transferAsset(args[1], args[2], new BigInteger(args[3]));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            default:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Usage();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.exit(0);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>在<code>asset-app/tool</code>目录下添加一个调用<code>AssetClient</code>的脚本<code>asset_run.sh</code>. 内容如下:</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash </span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">function usage() </span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot; Usage : &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;   bash asset_run.sh deploy&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;   bash asset_run.sh query    asset_account &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;   bash asset_run.sh register asset_account asset_amount &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;   bash asset_run.sh transfer from_asset_account to_asset_account amount &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot; &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot; &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;examples : &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;   bash asset_run.sh deploy &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;   bash asset_run.sh register  Asset0  10000000 &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;   bash asset_run.sh register  Asset1  10000000 &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;   bash asset_run.sh transfer  Asset0  Asset1 11111 &quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;   bash asset_run.sh query Asset0&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;   bash asset_run.sh query Asset1&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    case $1 in</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    deploy)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            [ $# -lt 1 ] &amp;&amp; { usage; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    register)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            [ $# -lt 3 ] &amp;&amp; { usage; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    transfer)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            [ $# -lt 4 ] &amp;&amp; { usage; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    query)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            [ $# -lt 2 ] &amp;&amp; { usage; }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    *)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        usage</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            ;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    esac</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    java -Djdk.tls.namedGroups=&quot;secp256k1&quot; -cp &#x27;apps/*:conf/:lib/*&#x27; org.fisco.bcos.asset.client.AssetClient $@</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>在<code>asset-app/test/resources</code>目录下创建<code>log4j.properties</code>. 内容如下:</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">### set log levels ###</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.rootLogger=DEBUG, file</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">### output the log information to the file ###</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.file=org.apache.log4j.DailyRollingFileAppender</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.file.DatePattern=&#x27;_&#x27;yyyyMMddHH&#x27;.log&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.file.File=./log/sdk.log</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.file.Append=true</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.file.filter.traceFilter=org.apache.log4j.varia.LevelRangeFilter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.file.layout=org.apache.log4j.PatternLayout</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.file.layout.ConversionPattern=[%p] [%-d{yyyy-MM-dd HH:mm:ss}] %C{1}.%M(%L) | %m%n</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">###output the log information to the console ###</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.stdout.Target=System.out</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span></span><span class="token-line" style="color:#393A34"><span class="token plain">log4j.appender.stdout.layout.ConversionPattern=[%p] [%-d{yyyy-MM-dd HH:mm:ss}] %C{1}.%M(%L) | %m%n</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>修改build.gradle文件中的编译任务.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    testCompile group: &#x27;junit&#x27;, name: &#x27;junit&#x27;, version: &#x27;4.12&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile (&quot;org.fisco-bcos.java-sdk:fisco-bcos-java-sdk:2.7.2&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile spring</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile (&#x27;org.slf4j:slf4j-log4j12:1.7.25&#x27;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    runtime (&#x27;org.slf4j:slf4j-log4j12:1.7.25&#x27;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>配置添加build.gradle文件中的编译任务. 直接加入到底部即可.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jar {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    destinationDir file(&#x27;dist/apps&#x27;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    archiveName project.name + &#x27;.jar&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    exclude &#x27;**/*.xml&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    exclude &#x27;**/*.properties&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    exclude &#x27;**/*.crt&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    exclude &#x27;**/*.key&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    doLast {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        copy {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from configurations.runtime</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            into &#x27;dist/lib&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        copy {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from file(&#x27;src/test/resources/&#x27;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            into &#x27;dist/conf&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        copy {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from file(&#x27;tool/&#x27;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            into &#x27;dist/&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        copy {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            from file(&#x27;src/test/resources/contract&#x27;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            into &#x27;dist/contract&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>引入日志库, 在<code>asset-app/test/resources</code>目录下, 创建一个空的<code>contract.properties</code>文件, 用于应用在运行时存放合约地址.</li></ul><ol start="6"><li>完成开发</li></ol><p>最终的目录结构如下:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">|-- build.gradle // gradle配置文件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- gradle</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |-- wrapper</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|       |-- gradle-wrapper.jar // 用于下载Gradle的相关代码实现</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|       |-- gradle-wrapper.properties // wrapper所使用的配置信息，比如gradle的版本等信息</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- gradlew // Linux或者Unix下用于执行wrapper命令的Shell脚本</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- gradlew.bat // Windows下用于执行wrapper命令的批处理脚本</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- src</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |-- main</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |-- java</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |     |-- org</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |          |-- fisco</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |                |-- bcos</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |                      |-- asset</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |                            |-- client // 放置客户端调用类</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |                                   |-- AssetClient.java</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |                            |-- contract // 放置Java合约类</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |                                   |-- Asset.java</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |   |-- resources</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |        |-- conf</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |               |-- ca.crt</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |               |-- node.crt</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |               |-- node.key</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |               |-- sdk.crt</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |               |-- sdk.key</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |               |-- sdk.publickey</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |        |-- applicationContext.xml // 项目配置文件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |        |-- contract.properties // 存储部署合约地址的文件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |        |-- log4j.properties // 日志配置文件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |        |-- contract //存放solidity约文件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |                |-- Asset.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |                |-- Table.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|   |-- test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|       |-- resources // 存放代码资源文件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |-- conf</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|                  |-- ca.crt</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|                  |-- node.crt</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|                  |-- node.key</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|                  |-- sdk.crt</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|                  |-- sdk.key</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|                  |-- sdk.publickey</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |-- applicationContext.xml // 项目配置文件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |-- contract.properties // 存储部署合约地址的文件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |-- log4j.properties // 日志配置文件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|           |-- contract //存放solidity约文件</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|                   |-- Asset.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|                   |-- Table.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|</span></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- tool</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    |-- asset_run.sh // 项目运行脚本</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol start="7"><li>运行应用</li></ol><ul><li><p>部署应用</p><ul><li><p>编译项目</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/fisco/asset-app</span></span><span class="token-line" style="color:#393A34"><span class="token plain">./gradlew build</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>部署<code>Asset.sol</code>合约</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># 进入dist目录</span></span><span class="token-line" style="color:#393A34"><span class="token plain">cd dist</span></span><span class="token-line" style="color:#393A34"><span class="token plain">bash asset_run.sh deploy</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul></li><li><p>应用的主要功能:</p><ul><li><p>注册资产账户</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">bash asset_run.sh register Foo 100000</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>查询账户资产</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">bash asset_run.sh query Foo</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>转移账户资产</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">bash asset_run.sh transfer Foo Bar  50000</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul></li></ul><p>以上就是全部内容.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/Blockchain/ubantu-fisco.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Blockchain/erc"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« ERC标准以及NFT应用开发</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Blockchain/arm-mac-fisco"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Arm Mac搭建Fisco BcoS区块链 »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-搭建单群组四节点fisco-bcos联盟链" class="table-of-contents__link">1. 搭建单群组四节点FISCO BCOS联盟链</a><ul><li><a href="#第一步-安装依赖" class="table-of-contents__link">第一步: 安装依赖</a></li><li><a href="#第二步-创建目录-下载脚本" class="table-of-contents__link">第二步: 创建目录, 下载脚本</a></li><li><a href="#第三步-搭建联盟链" class="table-of-contents__link">第三步: 搭建联盟链</a></li><li><a href="#第四步-启动节点" class="table-of-contents__link">第四步: 启动节点</a></li><li><a href="#第五步-检查日志输出" class="table-of-contents__link">第五步: 检查日志输出</a></li></ul></li><li><a href="#2-配置与使用控制台" class="table-of-contents__link">2. 配置与使用控制台</a><ul><li><a href="#第一步-准备控制台依赖" class="table-of-contents__link">第一步: 准备控制台依赖</a></li><li><a href="#第二步-启动并使用控制台" class="table-of-contents__link">第二步: 启动并使用控制台</a></li></ul></li><li><a href="#3-部署并调用helloworld的智能合约" class="table-of-contents__link">3. 部署并调用HelloWorld的智能合约</a><ul><li><a href="#第一步-部署合约" class="table-of-contents__link">第一步: 部署合约</a></li><li><a href="#第一步-应用程序设计" class="table-of-contents__link">第一步: 应用程序设计</a></li><li><a href="#第二步-开发接口源码" class="table-of-contents__link">第二步: 开发接口源码</a></li><li><a href="#第三步-编译智能合约" class="table-of-contents__link">第三步: 编译智能合约</a></li><li><a href="#第四步-创建区块链应用项目" class="table-of-contents__link">第四步: 创建区块链应用项目</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">About</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://fewwwww.github.io/WeChat-AddMe/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WeChat</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://suningyao.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Portfolio</a></li><li class="footer__item"><a href="https://github.com/fewwwww" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Blog. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e4625b6f.js"></script>
<script src="/assets/js/main.9cc731b6.js"></script>
</body>
</html>